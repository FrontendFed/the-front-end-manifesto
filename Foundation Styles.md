Foundation Styles
-----------------

Equally important to your application as your foundation markup are your foundation styles. HTML and CSS are the raw materials of the World Wide Web. [period] For this chapter will learn about best practices in setting up your stylesheets by implementing the chapters [starter CSS][]. I have developed these over the years and with a lot of OCD love.

These stylesheets are written using sass, but more important than the actual styles themselves – there are really not that many included – is the way in which they are organized. In my experience as you move along a Rails project {and the project grows and different authors contribute}; stylesheets can become behemoths, unmanageable, and downright confusing. To avoid this it's highly advisable to start any project with some kind of organizational structure in place: from the get-go. The styles I provide do this, and in this chapter I will discuss how and why they are organized as they are.

### Compass Set Up

Before me move along any further, if you're planning to use Compass, you need to quickly set it up.

1.  If you have not done so already per the [Foundation Markup][] chapter, add 'compass-rails' to your gemfile. For more explicit directions from the gem source take a look at the [compass-rails][] gem source.

2.  Run "bundle exec compass init" and then delete the 3 stylesheets generated by Compass. We're going to use our own.

3.  Add the following commented out code to your config/compass.rb file generated in step one:

        # To allow compass to import partials from subdirectories per:
        # http://blog.55minutes.com/2012/01/getting-compass-to-work-with-rails-31-and-32/
        # additional_import_paths = ["app/assets/stylesheets/<name>", "app/assets/stylesheets/<name>"]
        #
        # To compile in the necessary debugging information for FireSass.
        # sass_options = {:debug_info => true}

    I add these because chances are I may need them. You should definitely check out [FireSass][]. It allows you to see exactly which sass partial styles are coming from.

4.  Delete your application.css file and replace with application.scss. 

    NOTE: Your base application file needs to use the .scss syntax, however, other partials can use the .sass syntax, which is my preference.

5.  Use @import to organize styles rather than Sprockets. Add the following reminder at the top of application.scss:
        
        /*
         * Important! Do *not* use Sprockets "require" syntax.
         * Use @import to include other stylesheets and Compass mixins.
         */

    NOTE: You can use sprockets require syntax, however per the explanation found at of the [compass-rails][] gem source it is probably not a good idea.

6.  If you find your system has a problem with sass partials and underscores when precompiling, add the following to your config/application.rb file:

        # Precompile *all* assets, except those that start with underscore per:
        # http://blog.55minutes.com/2012/01/getting-compass-to-work-with-rails-31-and-32/
        config.assets.precompile << /(^[^_\/]|\/[^_])[^\/]*$/

That's it! You now have Compass and all that it brings available to you.

Some additional resources for working with Compass include:

- [Getting Compass to Work With Rails 3.1 (and 3.2)][Getting Compass to Work]
- [How I Use Compass With Rails 3.1][How I Use Compass]
- [Sass, Compass, and the Rails 3.1 Asset Pipeline][Asset Pipeline]

### Stylesheet Set Up

Now that Compass is set up, let's set up our stylesheets. This task is pretty straightforward. Basically all you have to do is clone these files and subfolders exactly as they're laid out into your assets/styles directory:

- https://github.com/maxxiimo/base-css

Simple as that. If you have been following along from the last chapter, [Foundation Markup][], here is what your page will now look with the new stylesheets: 

![][Basic HTML No Styles]

It's pretty basic, but much better than before.

### CSS Organization

As I mentioned before, the [sample stylesheets][starter CSS] I provide are pretty sparse, and that's fine. What's important are the conventions I use and organizational structure. All of things I do provide are very common to most projects, and perhaps the bare minimum necessary to do things right.

I can't stress enough how important it is to start a project with some kind of organizational structure in place. Even if you don't know what shape the application is going to take, it will serve you well to have a basic structure. As you move along you will fill in all of the empty placeholders: titles, partials, and you will add a boatload of new styles. 

#### Style TOC

There is nothing wrong with using Sprockets, however, since we're using sass my preferred method of organizing is to use [application.scss][] as a partials include file, almost like a table of contents, except in this case my TOC layers in styles in terms of precedents. Whatever partial that is brought then will override anything in the previous partial with the same style class or ID name and specificity, and/or tag.

The TOC for our [application.scss][] look something like this:

- DEFINITIONS
  - [_define.sass][]
- MIXINS
- RESETS
  - [normalize_h5bp.sass][]
  - [normalize.sass][]
  - [reset.sass][]
  - [reset_meyer.sass][]
- BASIC STRUCTURE
  - [_layout.sass][]
  - [_grids.sass][]
- TYPOGRAPHY
  - [_typography.sass][]
- MISCELLANEOUS
  - [_misc.sass][]
  - [_sprites.sass][]
- NAVIGATION
  - [_navigation.sass][]
- FORMS
  - [_forms.sass][]
- PAGES
  - [_pages.sass][]
- DEVELOPERS - staging area, new styles belong here !!!DO NOT INTEGRATE!!!
  - [_staging.sass][]
- APPLICATION - ad hoc code under this line
- LAST - second part of HTML 5 Boilerplate
  - [normalize_h5bp_p2.sass][]
  - [normalize_h5bp_p2_print.sass][]

##### What's in Each Section

I use the above "TOC" for most of my projects. What follows is a description of each section as they appear in [application.scss][]:

    /*
    * Important! Do *not* use Sprockets "require" syntax.
    * Use @import to include other stylesheets and Compass mixins.
    */
    
    
    /* DEFINITIONS
    ============================================================================ */
    @import "define";

Use a "definitions" section to set global variables such as $base-font, $base-font-size, etc.

    /* MIXINS
    ============================================================================ */
    @import "compass";
    
    
    /* RESETS
    ============================================================================ */
    @import "resets/normalize_h5bp";
    // @import "resets/normalize";
    // @import "compass/reset";
    // @import "resets/reset_meyer";

See the section on "Resets" for an overview on which resets are available to you. I include four major reset styles in my application file, uncomment the one I plan to use for a particular project.

    /* BASIC STRUCTURE
    ============================================================================ */
    @import "layout";
    // @import "grids";

Use a "layout" section to style major elements and component areas such as html and body tags, or header and footer areas. This section is also good place for grid styles. As you might have noticed, the partial grid is called in this example. This partial in some of my projects ports a sass version of YUI grids, and also Compasses Grid Backgrounds which in a nutshell:

"The grid-background mixins allow you to generate fixed, fluid and elastic grid-images on-the-fly using css3 gradients. These can be used for testing both horizontal and vertical grids."

    /* TYPOGRAPHY
    ============================================================================ */
    @import "typography";

Use the "typography" section to style major typographical elements such as paragraphs, fonts, links, etc. These typographical styles are standard across all pages unless redefined in subsequent partials.

    /* MISCELLANEOUS
    ============================================================================ */
    @import "misc";
    @import "sprites";

"miscellaneous" is a catchall for things you would like to appear earlier on in the stylesheet. I include two write off the bat. The first has an assortment of general styles I use while I'm building a front end. The second is for sprites, whether I'm using compasses built in Sprite engine, or building them on my own.

    /* NAVIGATION
    ============================================================================ */
    @import "navigation";

"navigation" could be part of another section, or even contained within another partial, however, experiences has shown me that a lot of things can happen to it, styles can become quite large, and there can be more than one navigation or even type of medication depending on user, so it's best to give it its own section. The main navigations parent tag \<nav> or more appropriately %nav does belong in the layout partial since through it you might control layout factors such as position or width.

    /* FORMS
    ============================================================================ */
    @import "forms";

"forms" it is self-evident. One comment about forms, I really dislike any form generator that doesn't easily let you change its underlying HTML structure, or is not that obvious as to where the underlying structure lies. I have consulted for numerous companies who started with such plug-ins only to realize how boxed in they were later on. Just a word of caution. Anyway, forms oftentimes get pretty complicated so here are some labeling title ideas you can use within your forms partial:

    /* PAGES
    ============================================================================ */
    @import "pages";

"pages" will hold the bulk of your code, i.e. each page or functional area of your application. You can organize them all within one partial, or separate them into their own partials and call them in the pages section, or a combination of this.

    /* DEVELOPERS - staging area, new styles belong here !!!DO NOT INTEGRATE!!!
    ============================================================================ */
    @import "staging";

The "staging" section is exactly what it says, a staging area for code. It's good to designating the area as a staging area so that one team or individual can be the gatekeeper to code entering stylesheets. This ensures that things remain organized, DRY, follow the stylesheet standards, and at a bare minimum provide a form of quality control.

    /* APPLICATION - ad hoc code under this line
    ============================================================================ */

"application" could be a place for anything that did not fit in or really needs to trump all styles before it.

    /* LAST - second part of HTML 5 Boilerplate
    ============================================================================ */
    @import "resets/normalize_h5bp_p2";
    @import "resets/normalize_h5bp_p2_print";

"last" is  a reminder that those styles need to appear last.

NOTE: Why the "=" underlines? It helps me find things, or see the organization, when I browse CSS output from a browser.

#### Resets

The granddaddy of all resets is Eric Meyer's "[Reset CSS][]".

Sometimes I use compass' [reset utilities][] which are based on Eric Meyer's work, but lately my preference has been to use [Normalize.css][]. HTML 5 boilerplate uses normalize.css with slight variations and style additions. The author of Normalize.css describes what it does best:

"Normalize.css is a customisable CSS file that makes browsers render all elements more consistently and in line with modern standards. We researched the differences between default browser styles in order to precisely target only the styles that need normalizing."

I converted Eric Meyer's, and both the original normalize.css and HTML 5 Boilerplate styles to .sass and .scss here:

- https://github.com/maxxiimo/base-resets

In the case of [H5BP][], I have commented out some of the typographic styles to give myself the option to keep them or move them into more appropriate partials.

The following article briefly outlines the changes in resets moving into HTML 5: 

- [HTML5 Reset Stylesheet][HTML5 Resets]

### Moving Forward

Undoubtedly, you will add a lot more to the structure above. Here are some tips to keep things as organized as I have laid out above and in the [starter CSS][].

#### Modularize Styles

Modularizing your styles is a great way to keep things organized. The degree of separation/modularization depends on your personal and/or teams preferences and project needs. In our [starter files][starter CSS] we use partials. As you add more partials consider the following:

1.  Group related partials together by using a common prefix:

        _homepage_form.sass
        
        _homepage_blog.sass

    Or...

2.  Group related snippets of code together in a larger themed partial:

        _homepage.sass

    Or...

3.  Group partials in folders. Take for example our [resets][] files. I provide several different flavors of resets, some of which are subdivided into separate files, but all of them fall under the folder "resets".

#### Use a Labeling System

Within your stylesheets use a system of labeling in order to better organize/manage related styles.

NOTE: It's good to precede the title name with "/* ". This way you can easily search for specific things like "/* Form" and not pick up every form item in your styles.

Here is an example of one I use:

    /* MAJOR SECTION IN SASS
      ============================================================================

    /* Heading in sass
      -----------------------
    
    /* subdivision, description, comment in sass

The same one using the .scss :

    /* MAJOR SECTION IN SCSS
      ============================================================================ */
    
    /* Heading in scss
      ----------------------- */
    
    /* subdivision, description, comment in scss */


I like the above sequence, but some other examples include:

    /* -----------------------------------------------------------------------
    
     Something major in here. Maybe a long description?
    
    ----------------------------------------------------------------------- */
    
    
    /* =============================================================================
       Major Section
       ========================================================================== */
    
    
    /* =============================================================================
     * Major Section (famous previous but for .sass)
     * =============================================================================
    
    
    /*
     * Comment in here, title, description, etc.
     */
    
    
    /* Comment in here, title, description, etc.
     * More of the same.
     * And a 3rd line maybe. */
    
    
Once upon a time ago I used to always use this:

    /* Title
    ------------------------------------------------------------------ */
    
    
    /* Subtitle
    -----------–--- */
    
    (use the same number of trailing dashes after the last letter for all subtitles - in this case 4.)


    /* further subdivision or comment */

Whatever you decide to use is totally up to you, but when you do decide be consistent within a project.

##### Subtitle Examples

By far the most used labeling level in your stylesheets will be "subtitles". Use them to group like things or elements, and title them with an eye on searching for the title in the future. Here are some examples for form elements:

    /* common
    ------------- */
    
    
    /* labels
    ------------- */
    
    
    /* inputs
    ------------- */
    
    
    /* checks and radials
    ------------------------- */
    
    
    /* text areas
    ----------------- */
    
    
    /* selects
    -------------- */
    
    
    /*  buttons
    -------------- */
    
    
    /* link buttons
    ------------------- */
    
    
    /* misc
    ----------- */

#### Naming Conventions

I have my way of naming styles, and I've seen things all over the board. Here's My Recommendation, keep it semantic, short, and use underscores between words. Of course with everything there's always caveats.

##### Semantic

I've never been too crazy for style names that really have no meaning like :class => 'H2603A'...Okay maybe I'm exaggerating, but I think you get the point. Try to use something that has meaning and can be recognized for what it is like :class => 'header', but by the same token try not to get super specific about the contents. Like it's probably not good to use something like, :class => 'johns_comments', because what happens if John gets fired in the comments becomes Frank's?

There is no sure hit formula for naming classes, just keep these things in mind.

I found these articles to be really eye-opening or interesting regarding the subject:

##### Short

Try to keep it under 10 characters! I've seen some pretty long class names out there in the wild, and I'm not too crazy about them. They take up too much room. On the flip side use caution when choosing something super super short.  For example I sometimes use :id => 'ft' to ID the footer. I feel fine doing this since the tag is called <footer>.

##### CamelCase, Underscores, Hyphens, Concatenated?

...whatever you use stick with it. Be consistent.

    :id => 'pageHeader'
    :id => 'page_header'
    :id => 'page-header'
    :id => 'pageheader'

Personally, I like to keep it simple and find one-worders that fit, then concatenate, but two words tops! ...and only when the words are small enough and distinguishable. Then if I must, I use one of the other methods above and only one throughout my styles and only if absolutely necessary, i.e. I don't have an opinion on which is better. My method isn't consistent enough for you? You're probably right, but I feel like I have mastered the art of class naming well enough that it feels and looks consistent (and pretty).

Here's some more opinions on the matter:

[CSS: camelCase vs under_score][aB vs. a_b]
[Hyphens or underscores in CSS and HTML identifiers?][Identifiers]
[CSS: CamelCase Seriously Sucks!][Sucks]

#### Keep it DRY!

Try not, no, DON'T Repeat Yourself! In CSS this means consolidating where possible, using variables, includes, and mixins.

#### Consolidate

Suppose for example in this no duh! contrived example I have two major sections to my layout. One holds my main content, and the other is an aside (I'm using Twitter Bootstrap thus the .row and .span's):

  .container
    .row
      .span9
        #main{:role => "main"}
          = yield
      .span3
        %aside
          <Some content here.>

The corresponding styles:

    #main
      padding: 0 19px
      background-color: $white
      border: 1px solid $border
      @include border-radius(8px)
    
    .span3 aside
      padding: 0 19px
      background-color: $white
      border: 1px solid $border
      @include border-radius(8px)

So to keep it DRY:

    #main,
    .span3 aside
      padding: 0 19px
      background-color: $white
      border: 1px solid $border
      @include border-radius(8px)

...and we cut the number of lines of code in half! Do that wherever it makes sense. In this example both styles live in the same place in my stylesheet and are related to one another so combining them makes absolute sense.

#### Variables

While variables do not explicitly DRY up your code, they kind of do and here's how; in the code above I specify a variable for the background-color of $white. At first glance you might think why not just use #FFF or "white", as if in this case "6 in one hand, half a dozen in the other" holds true, but what if later in the applications lifecycle I want to use a different shade of white? For example #FCFCFC. I would have to find every single instance of either #FFF or "white" and swap it out with the new value. By using variables, which I always locate in my _define.sass style partial, I can make the change in one instance and affect styles everywhere the variable is used. Not quite DRY, but kinda.

#### Includes



#### Mixins



[starter CSS]:          https://github.com/maxxiimo/base-css
[Foundation Markup]:    https://github.com/maxxiimo/railsviews/blob/master/Foundation%20Markup.md
[compass-rails]:        https://github.com/Compass/compass-rails
[FireSass]:             https://addons.mozilla.org/en-US/firefox/addon/firesass-for-firebug/
[Getting Compass to Work]: http://blog.55minutes.com/2012/01/getting-compass-to-work-with-rails-31-and-32/
[How I Use Compass]:    http://austintech.com/blog/2011/08/19/how-i-use-compass-with-rails-3-1/
[Asset Pipeline]:       http://www.engineyard.com/blog/2011/sass-compass-and-the-rails-3-1-asset-pipeline/
[application.scss]:     https://github.com/maxxiimo/base-css/blob/master/application.scss
[_define.sass]:         https://github.com/maxxiimo/base-css/blob/master/_define.sass
[_forms.sass]:          https://github.com/maxxiimo/base-css/blob/master/_forms.sass
[_grids.sass]:          https://github.com/maxxiimo/base-css/blob/master/_grids.sass
[_layout.sass]:         https://github.com/maxxiimo/base-css/blob/master/_layout.sass
[_misc.sass]:           https://github.com/maxxiimo/base-css/blob/master/_misc.sass
[_navigation.sass]:     https://github.com/maxxiimo/base-css/blob/master/_navigation.sass
[_pages.sass]:          https://github.com/maxxiimo/base-css/blob/master/_pages.sass
[_sprites.sass]:        https://github.com/maxxiimo/base-css/blob/master/_sprites.sass
[_staging.sass]:        https://github.com/maxxiimo/base-css/blob/master/_staging.sass
[_typography.sass]:     https://github.com/maxxiimo/base-css/blob/master/_typography.sass
[resets]:               https://github.com/maxxiimo/base-css/tree/master/resets
[normalize_h5bp.sass]:  https://github.com/maxxiimo/base-css/tree/master/resets/normalize_h5bp.sass
[normalize.sass]:       https://github.com/maxxiimo/base-css/tree/master/resets/normalize.sass
[reset.sass]:           https://github.com/maxxiimo/base-css/tree/master/resets/reset.sass
[reset_meyer.sass]:     https://github.com/maxxiimo/base-css/tree/master/resets/reset_meyer.sass
[normalize_h5bp_p2.sass]: https://github.com/maxxiimo/base-css/tree/master/resets/normalize_h5bp_p2.sass
[normalize_h5bp_p2_print.sass]: https://github.com/maxxiimo/base-css/tree/master/resets/normalize_h5bp_p2_print.sass
[Reset CSS]:            http://meyerweb.com/eric/tools/css/reset/index.html
[reset utilities]:      http://compass-style.org/reference/compass/reset/utilities/
[Normalize.css]:        https://github.com/necolas/normalize.css/
[H5BP]:                 https://github.com/maxxiimo/base-resets/blob/master/_normalize_h5bp.sass
[HTML5 Resets]:         http://html5doctor.com/html-5-reset-stylesheet/
[aB vs. a_b]:           http://stackoverflow.com/questions/1437527/css-camelcase-vs-under-score
[Identifiers]:          http://stackoverflow.com/questions/1686337/hyphens-or-underscores-in-css-and-html-identifiers
[Sucks]:                http://csswizardry.com/2010/12/css-camel-case-seriously-sucks/

[Basic HTML No Styles]: http://chrismaxwell.com/rails-views/assets/getting-started/base-html-files-with-styles.png
